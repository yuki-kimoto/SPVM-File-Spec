class TestCase::File::Spec {
  use File::Spec;
  use File::Spec::Unix;
  use File::Spec::Win32;
  use Sys;
  
  static method test : int () {
    
    {
      my $spec = File::Spec->new;
      unless ($spec is_compile_type File::Spec) {
        return 0;
      }
      
      if (Sys->defined("_WIN32")) {
        unless ($spec is_type File::Spec::Win32) {
          return 0;
        }
        unless ($spec isa File::Spec::Win32) {
          return 0;
        }
        unless ($spec isa File::Spec) {
          return 0;
        }
      }
      else {
        unless ($spec is_type File::Spec::Unix) {
          return 0;
        }
        unless ($spec isa File::Spec::Unix) {
          return 0;
        }
        unless ($spec isa File::Spec) {
          return 0;
        }
      }
    }

    {
      my $spec = File::Spec::Unix->new;
      unless ($spec is_compile_type File::Spec::Unix) {
        return 0;
      }
      unless ($spec is_type File::Spec::Unix) {
        return 0;
      }
      unless ($spec isa File::Spec::Unix) {
        return 0;
      }
    }

    {
      my $spec = File::Spec::Win32->new;
      unless ($spec is_compile_type File::Spec::Win32) {
        return 0;
      }
      unless ($spec is_type File::Spec::Win32) {
        return 0;
      }
      unless ($spec isa File::Spec::Win32) {
        return 0;
      }
    }
    
    return 1;
  }
  
  static method unix_canonpath : int () {
    
    my $spec = File::Spec::Unix->new;
    
    {
      my $canonpath = $spec->canonpath("xx////xx");
      unless ($canonpath eq "xx/xx") {
        return 0;
      }
    }
    {
      my $canonpath = $spec->canonpath("xx/././xx");
      unless ($canonpath eq "xx/xx") {
        return 0;
      }
    }
    {
      my $canonpath = $spec->canonpath("./xx");
      unless ($canonpath eq "xx") {
        return 0;
      }
    }
    {
      my $canonpath = $spec->canonpath("/../../xx");
      unless ($canonpath eq "/xx") {
        return 0;
      }
    }
    {
      my $canonpath = $spec->canonpath("/..");
      unless ($canonpath eq "/") {
        return 0;
      }
    }
    {
      my $canonpath = $spec->canonpath("xx/");
      unless ($canonpath eq "xx") {
        return 0;
      }
    }
    
    return 1;
  }
}
